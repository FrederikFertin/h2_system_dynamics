{UTF-8}
Alternative fuel demand S1= INTEG (
	IF THEN ELSE(Demand distribution S1=1, (Renorate S1*Demand total S1+Demand annual increase S1\
		), 0 ),
		0)
	~	
	~		|

Alternative fuel demand S2= INTEG (
	IF THEN ELSE(Demand distribution S2=1, (Renorate S2*Demand total S2+Demand annual increase S2\
		), 0 ),
		0)
	~	
	~		|

Average working hours =
	4000
	~	h
	~		|

Capacity of electrolyser=
	TOTAL H2 DEMAND*33.33/Efficiency of electrolyser/Average working hours/1000
	~	GW
	~	Hydrogen demand (tH2) * 1000 (kgH2/tH2) * 33.33 (kWhH2/kgH2) / efficiency \
		/ working hours (h) *10^-6 (GW/kW)= GW of electroliser capacity
	|

CAPEX=
	Cost of electrolyser/electrolyser lifespan
	~	€/kWh
	~		|

Cost of electrolyser = WITH LOOKUP (
	Capacity of electrolyser,
		([(0,0)-(10,10)],(0,650),(1,612.12),(5,526.24),(10,489.25),(15,467.62),(20,452.27),\
		(25,440.36),(30,430.63),(35,422.41),(40,415.28),(45,409),(50,403.37),(55,398.29),(60\
		,393.65),(65,389.37),(70,385.42),(75,381.74),(80,378.3),(85,375.06),(90,372.01),(95\
		,369.13),(100,366.39),(105,363.78),(110,361.3),(115,358.93),(120,356.66),(250,317.49\
		),(500,280.51),(750,258.87),(1000,243.52),(1250,231.62),(1500,221.89),(1750,213.66)\
		,(2000,206.54),(2250,200.25),(2500,194.63),(2750,189.54),(3000,184.9),(3250,180.63)\
		,(3500,176.67),(3750,172.99),(4000,169.55),(4250,166.31),(4500,163.26),(4750,160.38\
		),(5000,157.64),(5250,155.04),(5500,152.56),(5750,150.18),(6000,147.91) ))
	~	€/kW
	~	IRENA learning curve
	|

Demand annual increase S1=
	(871296-501403)/(2050-2019)
	~	
	~		|

Demand annual increase S2=
	(1.401e+06-867029)/(2050-2019)
	~	
	~		|

Demand distribution S1=
	IF THEN ELSE(Min cost S1=LCOE alternative fuel S1,1,IF THEN ELSE(Min cost S1=LCOE fossil S1\
		, 2 , 0 ))
	~	
	~		|

Demand distribution S2=
	IF THEN ELSE(Min cost S2=LCOE alternative fuel S2,1,IF THEN ELSE(Min cost S2=LCOE fossil S2\
		, 2 , 0 ))
	~	
	~		|

Demand other sectors=
	200000
	~	
	~		|

Demand total S1= INTEG (
	Demand annual increase S1,
		501403)
	~	
	~		|

Demand total S2= INTEG (
	Demand annual increase S2,
		867029)
	~	
	~		|

Efficiency of electrolyser=
	0.63
	~	
	~		|

electrolyser lifespan=
	60000
	~	h
	~		|

elprice = WITH LOOKUP (
	Time,
		([(0,0)-(10,10)],(2019,0.038),(2030,0.05),(2050,0.045) ))
	~	€/kWh
	~	Ioannis e-mail
	|

Fossil demand S1= INTEG (
	IF THEN ELSE(Demand distribution S1=2, Demand annual increase S1, -(Renorate S1*Demand total S1\
		) ),
		Demand total S1)
	~	
	~		|

Fossil demand S2= INTEG (
	IF THEN ELSE(Demand distribution S2=2, Demand annual increase S2, -(Renorate S2*Demand total S2\
		) ),
		Demand total S2)
	~	
	~		|

fossilprice=
	1.5
	~	€/l
	~		|

Hydrogen demand S1=
	Alternative fuel demand S1*177/1000
	~	
	~		|

Hydrogen demand S2=
	Alternative fuel demand S2*200/1000
	~	
	~		|

hydrogenprice=
	(CAPEX+OPEX)*(33.33/Efficiency of electrolyser)
	~	€/kg
	~	33.33 kWh/kg as HVHh2
	|

LCOE alternative fuel S1=
	1+hydrogenprice*2
	~	
	~		|

LCOE alternative fuel S2=
	1+hydrogenprice*2.5
	~	
	~		|

LCOE fossil S1=
	3+fossilprice*2.7
	~	
	~		|

LCOE fossil S2=
	2+fossilprice*4.5
	~	
	~		|

Min cost S1=
	MIN(LCOE alternative fuel S1, LCOE fossil S1)
	~	
	~		|

Min cost S2=
	MIN(LCOE alternative fuel S2, LCOE fossil S2)
	~	
	~		|

OPEX=
	elprice
	~	€/kWh
	~		|

Renorate S1=
	0.03
	~	
	~		|

Renorate S2=
	0.05
	~	
	~		|

TOTAL H2 DEMAND=
	Demand other sectors+Hydrogen demand S1+Hydrogen demand S2
	~	
	~		|

TotDemandCheck S1=
	Alternative fuel demand S1+Fossil demand S1
	~	
	~		|

TotDemandCheck S2=
	Alternative fuel demand S2+Fossil demand S2
	~	
	~		|

********************************************************
	.Control
********************************************************~
		Simulation Control Parameters
	|

FINAL TIME  = 2050
	~	Year
	~	The final time for the simulation.
	|

INITIAL TIME  = 2019
	~	Year
	~	The initial time for the simulation.
	|

SAVEPER  = 
        TIME STEP 
	~	Year [0,?]
	~	The frequency with which output is stored.
	|

TIME STEP  = 1
	~	Year [0,?]
	~	The time step for the simulation.
	|

\\\---/// Sketch information - do not modify anything except names
V300  Do not put anything below this section - it will be ignored
*View 1
$-1--1--1,0,|12||-1--1--1|-1--1--1|-1--1--1|-1--1--1|-1--1--1|96,96,46,0
10,1,fossilprice,3004,623,36,11,8,3,0,32,-1,0,0,0,0-0-0,0-0-0,Calibri|||0-0-0,0,0,0,0,0,0
10,2,LCOE alternative fuel S1,1716,2,58,19,8,3,0,32,-1,0,0,0,0-0-0,0-0-0,Calibri|||0-0-0,0,0,0,0,0,0
10,3,LCOE fossil S1,2077,2,49,11,8,3,0,32,-1,0,0,0,0-0-0,0-0-0,Calibri|||0-0-0,0,0,0,0,0,0
10,4,Hydrogen demand S1,1795,453,38,19,8,3,0,32,-1,0,0,0,0-0-0,0-0-0,Calibri|||0-0-0,0,0,0,0,0,0
10,5,TOTAL H2 DEMAND,1297,569,35,19,8,3,0,32,-1,0,0,0,0-0-0,0-0-0,Calibri|||0-0-0,0,0,0,0,0,0
10,6,Demand other sectors,1787,572,56,22,8,3,0,42,-1,0,0,0,0-0-0,0-0-0,Calibri|14||0-0-0,0,0,0,0,0,0
1,7,1,3,1,0,0,0,0,192,0,-1--1--1,,1|(2815,94)|
10,8,Demand distribution S1,1903,185,49,19,8,3,0,32,-1,0,0,0,0-0-0,0-0-0,Calibri|||0-0-0,0,0,0,0,0,0
1,9,2,8,0,0,0,0,0,192,0,-1--1--1,,1|(0,0)|
1,10,3,8,0,0,0,0,0,192,0,-1--1--1,,1|(0,0)|
1,11,4,5,0,0,0,0,0,192,0,-1--1--1,,1|(0,0)|
10,12,Min cost S1,1900,86,40,11,8,3,0,32,-1,0,0,0,0-0-0,0-0-0,Calibri|||0-0-0,0,0,0,0,0,0
1,13,2,12,0,0,0,0,0,192,0,-1--1--1,,1|(0,0)|
1,14,3,12,0,0,0,0,0,192,0,-1--1--1,,1|(0,0)|
1,15,12,8,0,0,0,0,0,192,0,-1--1--1,,1|(0,0)|
10,16,Alternative fuel demand S1,1760,349,49,24,3,3,0,32,-1,0,0,0,0-0-0,0-0-0,Calibri|||0-0-0,0,0,0,0,0,0
1,17,8,16,0,0,0,0,0,192,0,-1--1--1,,1|(0,0)|
1,18,16,4,0,0,0,0,0,192,0,-1--1--1,,1|(0,0)|
10,19,Fossil demand S1,2050,347,47,24,3,3,0,32,-1,0,0,0,0-0-0,0-0-0,Calibri|||0-0-0,0,0,0,0,0,0
1,20,8,19,0,0,0,0,0,192,0,-1--1--1,,1|(0,0)|
10,21,TotDemandCheck S1,2390,519,60,19,8,3,0,34,-1,0,0,0,0-0-0,0-0-0,Calibri|||0-0-0,0,0,0,0,0,0
1,22,19,21,0,0,0,0,0,192,0,-1--1--1,,1|(0,0)|
1,23,16,21,0,0,0,0,0,192,0,-1--1--1,,1|(0,0)|
10,24,Demand annual increase S1,2413,73,54,19,8,3,0,32,-1,0,0,0,0-0-0,0-0-0,Calibri|||0-0-0,0,0,0,0,0,0
10,25,Demand total S1,2482,198,47,22,3,3,0,32,-1,0,0,0,0-0-0,0-0-0,Calibri|||0-0-0,0,0,0,0,0,0
1,26,24,25,0,0,0,0,0,192,0,-1--1--1,,1|(0,0)|
1,27,25,19,0,0,0,0,0,192,0,-1--1--1,,1|(0,0)|
1,28,24,19,0,0,0,0,0,192,0,-1--1--1,,1|(0,0)|
1,29,24,16,0,0,0,0,0,192,0,-1--1--1,,1|(0,0)|
1,30,25,16,0,0,0,0,0,192,0,-1--1--1,,1|(0,0)|
10,31,Hydrogen demand S2,1797,689,38,19,8,3,0,32,-1,0,0,0,0-0-0,0-0-0,Calibri|||0-0-0,0,0,0,0,0,0
10,32,Alternative fuel demand S2,1757,791,51,26,3,3,0,32,-1,0,0,0,0-0-0,0-0-0,Calibri|||0-0-0,0,0,0,0,0,0
10,33,Fossil demand S2,2046,793,60,22,3,3,0,32,-1,0,0,0,0-0-0,0-0-0,Calibri|||0-0-0,0,0,0,0,0,0
10,34,Demand distribution S2,1900,913,49,19,8,3,0,32,-1,0,0,0,0-0-0,0-0-0,Calibri|||0-0-0,0,0,0,0,0,0
10,35,Min cost S2,1907,1069,40,11,8,3,0,32,-1,0,0,0,0-0-0,0-0-0,Calibri|||0-0-0,0,0,0,0,0,0
10,36,LCOE alternative fuel S2,1753,1181,58,19,8,3,0,32,-1,0,0,0,0-0-0,0-0-0,Calibri|||0-0-0,0,0,0,0,0,0
10,37,LCOE fossil S2,2061,1178,49,11,8,3,0,32,-1,0,0,0,0-0-0,0-0-0,Calibri|||0-0-0,0,0,0,0,0,0
10,38,Renorate S2,2425,807,41,11,8,3,0,32,-1,0,0,0,0-0-0,0-0-0,Calibri|||0-0-0,0,0,0,0,0,0
10,39,TotDemandCheck S2,2386,641,60,19,8,3,0,32,-1,0,0,0,0-0-0,0-0-0,Calibri|||0-0-0,0,0,0,0,0,0
10,40,Demand total S2,2464,943,48,26,3,3,0,32,-1,0,0,0,0-0-0,0-0-0,Calibri|||0-0-0,0,0,0,0,0,0
10,41,Demand annual increase S2,2433,1081,54,19,8,3,0,32,-1,0,0,0,0-0-0,0-0-0,Calibri|||0-0-0,0,0,0,0,0,0
1,42,32,39,0,0,0,0,0,192,0,-1--1--1,,1|(0,0)|
1,43,33,39,0,0,0,0,0,192,0,-1--1--1,,1|(0,0)|
1,44,31,5,0,0,0,0,0,192,0,-1--1--1,,1|(0,0)|
1,45,32,31,0,0,0,0,0,192,0,-1--1--1,,1|(0,0)|
1,46,38,33,0,0,0,0,0,192,0,-1--1--1,,1|(0,0)|
1,47,38,32,1,0,0,0,0,192,0,-1--1--1,,1|(2063,750)|
1,48,40,33,0,0,0,0,0,192,0,-1--1--1,,1|(0,0)|
1,49,40,32,0,0,0,0,0,192,0,-1--1--1,,1|(0,0)|
1,50,34,33,0,0,0,0,0,192,0,-1--1--1,,1|(0,0)|
1,51,34,32,0,0,0,0,0,192,0,-1--1--1,,1|(0,0)|
1,52,35,34,0,0,0,0,0,192,0,-1--1--1,,1|(0,0)|
1,53,37,34,0,0,0,0,0,192,0,-1--1--1,,1|(0,0)|
1,54,36,34,0,0,0,0,0,192,0,-1--1--1,,1|(0,0)|
1,55,36,35,0,0,0,0,0,192,0,-1--1--1,,1|(0,0)|
1,56,37,35,0,0,0,0,0,192,0,-1--1--1,,1|(0,0)|
1,57,41,33,0,0,0,0,0,192,0,-1--1--1,,1|(0,0)|
1,58,41,32,0,0,0,0,0,192,0,-1--1--1,,1|(0,0)|
1,59,41,40,0,0,0,0,0,192,0,-1--1--1,,1|(0,0)|
1,60,1,37,1,0,0,0,0,192,0,-1--1--1,,1|(2784,1182)|
10,61,Renorate S1,2443,350,41,11,8,3,0,32,-1,0,0,0,0-0-0,0-0-0,Calibri|||0-0-0,0,0,0,0,0,0
1,62,61,19,0,0,0,0,0,192,0,-1--1--1,,1|(0,0)|
1,63,61,16,1,0,0,0,0,192,0,-1--1--1,,1|(2053,393)|
10,64,Capacity of electrolyser,991,845,41,19,8,3,0,32,-1,0,0,0,0-0-0,0-0-0,Calibri|||0-0-0,0,0,0,0,0,0
10,65,Average working hours,991,931,57,19,8,3,0,32,-1,0,0,0,0-0-0,0-0-0,Calibri|||0-0-0,0,0,0,0,0,0
1,66,65,64,0,0,0,0,0,192,0,-1--1--1,,1|(0,0)|
10,67,Cost of electrolyser,991,743,41,19,8,3,0,32,-1,0,0,0,0-0-0,0-0-0,Calibri|||0-0-0,0,0,0,0,0,0
1,68,64,67,0,0,0,0,0,192,0,-1--1--1,,1|(0,0)|
10,69,CAPEX,994,627,23,11,8,3,0,32,-1,0,0,0,0-0-0,0-0-0,Calibri|||0-0-0,0,0,0,0,0,0
10,70,electrolyser lifespan,867,717,41,19,8,3,0,32,-1,0,0,0,0-0-0,0-0-0,Calibri|||0-0-0,0,0,0,0,0,0
1,71,70,69,0,0,0,0,0,192,0,-1--1--1,,1|(0,0)|
1,72,67,69,0,0,0,0,0,192,0,-1--1--1,,1|(0,0)|
10,73,elprice,997,434,24,11,8,3,0,32,-1,0,0,0,0-0-0,0-0-0,Calibri|||0-0-0,0,0,0,0,0,0
10,74,Time,997,350,26,11,8,2,0,35,-1,0,0,0,128-128-128,0-0-0,Calibri|||128-128-128,0,0,0,0,0,0
1,75,74,73,0,0,0,0,0,192,0,-1--1--1,,1|(0,0)|
10,76,OPEX,998,511,20,11,8,3,0,32,-1,0,0,0,0-0-0,0-0-0,Calibri|||0-0-0,0,0,0,0,0,0
10,77,hydrogenprice,1115,568,48,11,8,3,0,32,-1,0,0,0,0-0-0,0-0-0,Calibri|||0-0-0,0,0,0,0,0,0
1,78,69,77,0,0,0,0,0,192,0,-1--1--1,,1|(0,0)|
1,79,76,77,1,0,0,0,0,192,0,-1--1--1,,1|(1056,531)|
10,80,Efficiency of electrolyser,702,726,43,19,8,3,0,32,-1,0,0,0,0-0-0,0-0-0,Calibri|||0-0-0,0,0,0,0,0,0
1,81,80,77,1,0,0,0,0,192,0,-1--1--1,,1|(864,608)|
12,82,0,557,888,80,40,3,7,0,32,-1,0,0,0,0-0-0,0-0-0,Calibri|||0-0-0,0,0,0,0,0,0
Electrolyser cost is a lookup table with cost per capacity, so an incoming capacity gives a cost as output
1,83,5,64,1,0,0,0,0,192,0,-1--1--1,,1|(1165,805)|
1,84,6,5,0,0,0,0,0,192,0,-1--1--1,,1|(0,0)|
1,85,77,2,1,0,0,0,0,192,0,-1--1--1,,1|(1373,162)|
1,86,77,36,1,0,0,0,0,192,0,-1--1--1,,1|(1347,966)|
1,87,80,64,0,0,0,0,0,192,0,-1--1--1,,1|(0,0)|
1,88,73,76,0,0,0,0,0,192,0,-1--1--1,,1|(0,0)|
///---\\\
:L<%^E!@
5:Time
19:46,0
24:0
25:0
26:0
23:0
15:0,0,0,0,0,0
27:0,
34:0,
42:0
72:0
73:0
95:0
96:0
97:0
77:0
78:0
102:1
93:0
94:0
92:0
91:0
90:0
87:0
75:
43:
103:8,8,8,3,8
105:0,0,0,0,0,0,0,0,0,0
104:Courier|12||0-0-0|0-0-0|-1--1--1|0-0-255|192-192-192|-1--1--1
